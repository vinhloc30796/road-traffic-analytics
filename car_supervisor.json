{
    "type": "kafka",
    "spec": {
      "dataSchema": {
        "dataSource": "car",
        "timestampSpec": {
          "column": "kafka.timestamp",
          "format": "auto"
        },
        "dimensionsSpec": {
          "dimensions": [
            {
              "type": "string",
              "name": "kafka.timestamp"
            },
            {
              "type": "string",
              "name": "id_compteur"
            },
            {
              "type": "string",
              "name": "date"
            },
            {
              "type": "string",
              "name": "nom_compteur"
            },
            {
              "type": "string",
              "name": "etat_trafic"
            },
            {
              "type": "string",
              "name": "compteur_amont"
            },
            {
              "type": "string",
              "name": "nom_compteur_amont"
            },
            {
              "type": "string",
              "name": "compteur_aval"
            },
            {
              "type": "string",
              "name": "nom_compteur_aval"
            },
            {
              "type": "float",
              "name": "lon"
            },
            {
              "type": "float",
              "name": "lat"
            }
          ]
        },
        "metricsSpec": [],
        "granularitySpec": {
          "type": "uniform",
          "segmentGranularity": "HOUR",
          "queryGranularity": "NONE",
          "rollup": false
        }
      },
      "tuningConfig": {
        "type": "kafka",
        "reportParseExceptions": false
      },
      "ioConfig": {
        "type": "kafka",
        "topic": "car",
        // "inputFormat": {
        //   "type": "kafka",
        //   "timestampColumnName": "kafka.timestamp",
        //   "valueFormat": {
        //     "type": "json"
        //   }
        // },
        "inputFormat": {
          "type": "kafka",
          "timestampColumnName": "kafka.timestamp",
          "valueFormat": {
            "type": "protobuf",
            "protoBytesDecoder": {
              "type": "schema_registry",
              "url": "http://localhost:8084"
            }
          }
        },
        "replicas": 2,
        "taskDuration": "PT10M",
        "completionTimeout": "PT20M",
        "consumerProperties": {
          "bootstrap.servers": "kafka:29092"
        }
      }
    }
  }